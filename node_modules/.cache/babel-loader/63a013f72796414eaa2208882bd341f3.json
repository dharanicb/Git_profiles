{"ast":null,"code":"var _jsxFileName = \"/home/workspace/react-hooks/sessions/making-api-call-with-hooks-part-2/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport List from \"./Components/List\";\nimport { CircularProgress } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [data, setData] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const priorDate = moment().subtract(30, \"days\").format(\"YYYY-MM-DD\");\n\n  const loadRepositories = () => {\n    axios.get(`https://api.github.com/search/repositories?q=created:>${priorDate}&sort=stars&order=desc&page=${page}`).then(res => {\n      setData(prevData => [...prevData, ...res.data.items]);\n      setLoading(false);\n    }).catch(error => {\n      setError(error);\n      setLoading(false);\n    });\n  };\n\n  useEffect(() => {\n    loadRepositories();\n  }, [page]);\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, []);\n\n  const handleScroll = () => {\n    const scrolledToBottom = window.innerHeight + window.scrollY >= document.body.offsetHeight;\n\n    if (scrolledToBottom && !loading) {\n      setPage(prevPage => prevPage + 1);\n      setLoading(true);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(List, {\n      data: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n        style: {\n          color: \"#36D7B7\"\n        },\n        size: 60\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(App, \"QbR9dgRqLEtwlMkRe67vCbh+RgI=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","moment","axios","List","CircularProgress","App","data","setData","error","setError","page","setPage","loading","setLoading","priorDate","subtract","format","loadRepositories","get","then","res","prevData","items","catch","window","addEventListener","handleScroll","removeEventListener","scrolledToBottom","innerHeight","scrollY","document","body","offsetHeight","prevPage","textAlign","color"],"sources":["/home/workspace/react-hooks/sessions/making-api-call-with-hooks-part-2/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport List from \"./Components/List\";\nimport { CircularProgress } from \"@mui/material\";\n\nconst App = () => {\n  const [data, setData] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n\n  const priorDate = moment().subtract(30, \"days\").format(\"YYYY-MM-DD\");\n\n  const loadRepositories = () => {\n    axios\n      .get(\n        `https://api.github.com/search/repositories?q=created:>${priorDate}&sort=stars&order=desc&page=${page}`\n      )\n      .then((res) => {\n        setData((prevData) => [...prevData, ...res.data.items]);\n        setLoading(false);\n      })\n      .catch((error) => {\n        setError(error);\n        setLoading(false);\n      });\n  };\n\n  useEffect(() => {\n    loadRepositories();\n  }, [page]);\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, []);\n\n  const handleScroll = () => {\n    const scrolledToBottom =\n      window.innerHeight + window.scrollY >= document.body.offsetHeight;\n\n    if (scrolledToBottom && !loading) {\n      setPage((prevPage) => prevPage + 1);\n      setLoading(true);\n    }\n  };\n\n  return (\n    <>\n      <List data={data} />\n      {loading && (\n        <div style={{ textAlign: \"center\" }}>\n          <CircularProgress style={{ color: \"#36D7B7\" }} size={60} />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default App;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,SAASC,gBAAT,QAAiC,eAAjC;;;;AAEA,MAAMC,GAAG,GAAG,MAAM;EAAA;;EAChB,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC,EAAD,CAAhC;EACA,MAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACW,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC,CAAD,CAAhC;EACA,MAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,KAAD,CAAtC;EAEA,MAAMe,SAAS,GAAGb,MAAM,GAAGc,QAAT,CAAkB,EAAlB,EAAsB,MAAtB,EAA8BC,MAA9B,CAAqC,YAArC,CAAlB;;EAEA,MAAMC,gBAAgB,GAAG,MAAM;IAC7Bf,KAAK,CACFgB,GADH,CAEK,yDAAwDJ,SAAU,+BAA8BJ,IAAK,EAF1G,EAIGS,IAJH,CAISC,GAAD,IAAS;MACbb,OAAO,CAAEc,QAAD,IAAc,CAAC,GAAGA,QAAJ,EAAc,GAAGD,GAAG,CAACd,IAAJ,CAASgB,KAA1B,CAAf,CAAP;MACAT,UAAU,CAAC,KAAD,CAAV;IACD,CAPH,EAQGU,KARH,CAQUf,KAAD,IAAW;MAChBC,QAAQ,CAACD,KAAD,CAAR;MACAK,UAAU,CAAC,KAAD,CAAV;IACD,CAXH;EAYD,CAbD;;EAeAb,SAAS,CAAC,MAAM;IACdiB,gBAAgB;EACjB,CAFQ,EAEN,CAACP,IAAD,CAFM,CAAT;EAIAV,SAAS,CAAC,MAAM;IACdwB,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCC,YAAlC;IACA,OAAO,MAAM;MACXF,MAAM,CAACG,mBAAP,CAA2B,QAA3B,EAAqCD,YAArC;IACD,CAFD;EAGD,CALQ,EAKN,EALM,CAAT;;EAOA,MAAMA,YAAY,GAAG,MAAM;IACzB,MAAME,gBAAgB,GACpBJ,MAAM,CAACK,WAAP,GAAqBL,MAAM,CAACM,OAA5B,IAAuCC,QAAQ,CAACC,IAAT,CAAcC,YADvD;;IAGA,IAAIL,gBAAgB,IAAI,CAAChB,OAAzB,EAAkC;MAChCD,OAAO,CAAEuB,QAAD,IAAcA,QAAQ,GAAG,CAA1B,CAAP;MACArB,UAAU,CAAC,IAAD,CAAV;IACD;EACF,CARD;;EAUA,oBACE;IAAA,wBACE,QAAC,IAAD;MAAM,IAAI,EAAEP;IAAZ;MAAA;MAAA;MAAA;IAAA,QADF,EAEGM,OAAO,iBACN;MAAK,KAAK,EAAE;QAAEuB,SAAS,EAAE;MAAb,CAAZ;MAAA,uBACE,QAAC,gBAAD;QAAkB,KAAK,EAAE;UAAEC,KAAK,EAAE;QAAT,CAAzB;QAA+C,IAAI,EAAE;MAArD;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QAHJ;EAAA,gBADF;AAUD,CAtDD;;GAAM/B,G;;KAAAA,G;AAwDN,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}